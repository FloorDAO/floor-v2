# BaseStrategy
[Git Source](https://github.com/FloorDAO/floor-v2/blob/fd4de86a192de96d73fe2e56a84ec542b57b1c69/src/contracts/strategies/BaseStrategy.sol)

**Inherits:**
[IBaseStrategy](/src/interfaces/strategies/BaseStrategy.sol/contract.IBaseStrategy.md), Initializable, Ownable, Pausable, ReentrancyGuard

Provides underlying logic for all strategies that handles common logic. This includes
storing the total pending rewards and taking snapshots to maintain epoch earned yield.


## State Variables
### name
The human-readable name of the strategy.


```solidity
bytes32 public name;
```


### strategyId
The numerical ID of the vault that acts as an index for the {StrategyFactory}.

*This must be set in the initializer function call.*


```solidity
uint public strategyId;
```


### lastEpochRewards
The amount of rewards claimed in the last claim call.


```solidity
mapping(address => uint) public lastEpochRewards;
```


### lifetimeRewards
This will return the internally tracked value of tokens that have been harvested
by the strategy.


```solidity
mapping(address => uint) public lifetimeRewards;
```


### position
Maintain a list of active positions held by depositing users.


```solidity
mapping(address => uint) public position;
```


### _validTokens
Stores a list of tokens that the strategy supports.


```solidity
mapping(address => bool) internal _validTokens;
```


## Functions
### snapshot

Gets a read of new yield since the last call. This is what can be called when
the epoch ends to determine the amount generated within the epoch.


```solidity
function snapshot() external onlyOwner returns (address[] memory tokens_, uint[] memory amounts_);
```
**Returns**

|Name|Type|Description|
|----|----|-----------|
|`tokens_`|`address[]`|Tokens that have been generated as yield|
|`amounts_`|`uint256[]`|The amount of yield generated for the corresponding token|


### totalRewards

The total amount of rewards generated by the strategy.


```solidity
function totalRewards() external view returns (address[] memory tokens_, uint[] memory amounts_);
```

### available

Gets rewards that are available to harvest.


```solidity
function available() external view virtual returns (address[] memory, uint[] memory);
```

### harvest

Extracts all rewards from third party and moves it to a recipient. This should
only be called by a specific action.

*The recipient _should_ always be set to the {Treasury} by the {StrategyFactory}.*


```solidity
function harvest(address) external virtual onlyOwner;
```

### validTokens

Returns an array of tokens that the strategy supports.


```solidity
function validTokens() external view virtual returns (address[] memory);
```
**Returns**

|Name|Type|Description|
|----|----|-----------|
|`<none>`|`address[]`|address[] The address of valid tokens|


### pause

Pauses deposits from being made into the strategy.

*This should only be called by a guardian or governor.*


```solidity
function pause(bool _p) external onlyOwner;
```
**Parameters**

|Name|Type|Description|
|----|----|-----------|
|`_p`|`bool`|Boolean value for if the vault should be paused|


### onlyValidToken

Confirms that the requested single token is valid before processing a function.


```solidity
modifier onlyValidToken(address token);
```
**Parameters**

|Name|Type|Description|
|----|----|-----------|
|`token`|`address`|A token address that must be valid|


### onlyValidTokens

Confirms that the requested tokens are all valid before processing a function.


```solidity
modifier onlyValidTokens(address[] memory tokens);
```
**Parameters**

|Name|Type|Description|
|----|----|-----------|
|`tokens`|`address[]`|An array of tokens that must all be valid|


